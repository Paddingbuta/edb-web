(gdb) b megasas.c:652
Breakpoint 1 at 0x555555981fb4: file hw/scsi/megasas.c, line 652.
(gdb) b megasas_lookup_frame
Breakpoint 2 at 0x555555981591: file hw/scsi/megasas.c, line 453.
(gdb) c
Continuing.
[Thread 0x7fffe71f6700 (LWP 7230) exited]
[New Thread 0x7fffe71f6700 (LWP 7305)]
[Switching to Thread 0x7fffe610b700 (LWP 7148)]

Breakpoint 1, megasas_init_firmware (s=0x7fffe5633010, cmd=0x7fffe5633c08)
at hw/scsi/megasas.c:652
652      s->reply_queue_head = ldl_le_pci_dma(pcid, s->producer_pa);
(gdb) n
653      s->reply_queue_tail = ldl_le_pci_dma(pcid, s->consumer_pa);
(gdb) p /x s->reply_queue_head
$1 = 0xffffff
(gdb) c
Continuing.
[Thread 0x7fffe71f6700 (LWP 7305) exited]

Breakpoint 2, megasas_lookup_frame (s=0x7fffe5633010, frame=0)
at hw/scsi/megasas.c:453
453      MegasasCmd *cmd = NULL;
(gdb) n
454      int num = 0, index;
(gdb) n
456      index = s->reply_queue_head;
(gdb) n
458      while (num < s->fw_cmds) {
(gdb) p /x index
$2 = 0xffffff
(gdb) n
459          if (s->frames[index].pa && s->frames[index].pa == frame) {
(gdb) n

Program received signal SIGSEGV, Segmentation fault.
0x00005555559815d3 in megasas_lookup_frame (s=0x7fffe5633010, frame=0)
at hw/scsi/megasas.c:459
459          if (s->frames[index].pa && s->frames[index].pa == frame) {
(gdb) bt
#0  0x00005555559815d3 in megasas_lookup_frame (s=0x7fffe5633010, frame=0)
at hw/scsi/megasas.c:459
#1  0x00005555559857ce in megasas_handle_abort (s=0x7fffe5633010, cmd=0x7fffe5633c08) at hw/scsi/megasas.c:1917
#2  0x0000555555985a27 in megasas_handle_frame (s=0x7fffe5633010, frame_addr=1016006592, frame_count=0) at hw/scsi/megasas.c:1972
#3  0x00005555559860d1 in megasas_mmio_write (opaque=0x7fffe5633010, addr=192, val=1016006592, size=4) at hw/scsi/megasas.c:2136
#4  0x0000555555986255 in megasas_port_write (opaque=0x7fffe5633010, addr=192, val=1016006592, size=4) at hw/scsi/megasas.c:2187
#5  0x00005555557297e9 in memory_region_write_accessor (mr=0x7fffe5633988, addr=192, value=0x7fffe610a808, size=4, shift=0, mask=4294967295, attrs=...)
at /root/qemu-2.6.0/memory.c:525
#6  0x00005555557299f4 in access_with_adjusted_size (addr=192, value=0x7fffe610a808, size=4, access_size_min=4, access_size_max=4, access=
0x555555729708 <memory_region_write_accessor>, mr=0x7fffe5633988, attrs=...) at /root/qemu-2.6.0/memory.c:591
#7  0x000055555572c63b in memory_region_dispatch_write (mr=0x7fffe5633988, addr=192, data=1016006592, size=4, attrs=...) at /root/qemu-2.6.0/memory.c:1273
#8  0x00005555556de6c8 in address_space_write_continue (as=0x5555560a6a20 <address_space_io>, addr=49344, attrs=..., buf=0x7ffff7ff1000 "\300\a\217<", len=4, addr1=192, l=4, mr=0x7fffe5633988) at /root/qemu-2.6.0/exec.c:2607
#9  0x00005555556de8aa in address_space_write (as=0x5555560a6a20 <address_space_---Type <return> to continue, or q <return> to quit---
io>, addr=49344, attrs=..., buf=0x7ffff7ff1000 "\300\a\217<", len=4)
at /root/qemu-2.6.0/exec.c:2665
#10 0x00005555556dec61 in address_space_rw (as=0x5555560a6a20 <address_space_io>, addr=49344, attrs=..., buf=0x7ffff7ff1000 "\300\a\217<", len=4, is_write=true) at /root/qemu-2.6.0/exec.c:2768
#11 0x0000555555725d70 in kvm_handle_io (port=49344, attrs=..., data=0x7ffff7ff1000, direction=1, size=4, count=1) at /root/qemu-2.6.0/kvm-all.c:1699
#12 0x0000555555726270 in kvm_cpu_exec (cpu=0x555556f80f20)
at /root/qemu-2.6.0/kvm-all.c:1863
#13 0x000055555570d8c8 in qemu_kvm_cpu_thread_fn (arg=0x555556f80f20)
at /root/qemu-2.6.0/cpus.c:1064
#14 0x00007ffff69e6dc5 in start_thread () at /lib64/libpthread.so.0
#15 0x00007ffff1b5728d in clone () at /lib64/libc.so.6
(gdb) c
Continuing.
[Thread 0x7fffe610b700 (LWP 7148) exited]
[Thread 0x7fffe9183700 (LWP 7146) exited]

Program terminated with signal SIGSEGV, Segmentation fault.
The program no longer exists.
(gdb)
