/*
 this simple programm just write given number of chars to 
 given position in a file.

 compile: gcc -Wall open_write.c -o /tmp/open_write
*/
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <assert.h>
#include <stdlib.h>

int main(int argc, char** argv)
{
	int fd;
	int size,i;
	char ch;
	char* p;

	assert(argc >= 4);

	size = atoi(argv[3]);
	p = malloc(size);

	if (argc > 4)
		ch=argv[4][0];
	else
		ch='*';
	
	for (i = 0; i < size; i++)
		p[i] = ch;

	fd = open(argv[1], O_WRONLY|O_CREAT, 0777);

	lseek(fd, atoi(argv[2]), SEEK_SET);
	write(fd, p, size);
	return 0;
}
