$ ./libtiff-master/tools/bmp2tiff -c zip 1.bmp 1.tif
=================================================================
==22299== ERROR: AddressSanitizer: unknown-crash on address 0x7fe0d2125de0 at pc 0x7fe0cefbdb3f bp 0x7ffcac677b70 sp 0x7ffcac677318
READ of size 65536 at 0x7fe0d2125de0 thread T0
#0 0x7fe0cefbdb3e (/lib64/libasan.so.0+0xeb3e)
#1 0x7fe0ced99136 in fill_window (/lib64/libz.so.1+0x3136)
#2 0x7fe0ced99bbf in deflate_slow (/lib64/libz.so.1+0x3bbf)
#3 0x7fe0ced9ac6f in deflate (/lib64/libz.so.1+0x4c6f)
#4 0x49cfed in ZIPEncode /home/dazhuang/asan/libtiff-master/libtiff/tif_zip.c:277
#5 0x45665e in TIFFWriteScanline /home/dazhuang/asan/libtiff-master/libtiff/tif_write.c:173
#6 0x40450f in main /home/dazhuang/asan/libtiff-master/tools/bmp2tiff.c:775
#7 0x7fe0ce6f4af4 in __libc_start_main (/lib64/libc.so.6+0x21af4)
#8 0x4019a8 in _start (/home/dazhuang/asan/libtiff-master/tools/bmp2tiff+0x4019a8)
0x7fe0d2133c00 is located 0 bytes to the right of 1819648-byte region [0x7fe0d1f77800,0x7fe0d2133c00)
allocated by thread T0 here:
#0 0x7fe0cefc5129 (/lib64/libasan.so.0+0x16129)
#1 0x45b761 in _TIFFmalloc /home/dazhuang/asan/libtiff-master/libtiff/tif_unix.c:316
#2 0x4037c3 in main /home/dazhuang/asan/libtiff-master/tools/bmp2tiff.c:678
#3 0x7fe0ce6f4af4 in __libc_start_main (/lib64/libc.so.6+0x21af4)
SUMMARY: AddressSanitizer: unknown-crash ??:0 ??
Shadow bytes around the buggy address:
0x0ffc9a41cb60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cb70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cb80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cb90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cba0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
=>0x0ffc9a41cbb0: 00 00 00 00 00 00 00 00 00 00 00 00[00]00 00 00
0x0ffc9a41cbc0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cbd0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cbe0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cbf0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x0ffc9a41cc00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
Shadow byte legend (one shadow byte represents 8 application bytes):
Addressable: 00
Partially addressable: 01 02 03 04 05 06 07
Heap left redzone: fa
Heap righ redzone: fb
Freed Heap region: fd
Stack left redzone: f1
Stack mid redzone: f2
Stack right redzone: f3
Stack partial redzone: f4
Stack after return: f5
Stack use after scope: f8
Global redzone: f9
Global init order: f6
Poisoned by user: f7
ASan internal: fe
==22299== ABORTING


$ gdb bmp2tiff

=================================================================
GNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-80.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html [Open URL]>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/ [Open URL]>...
Reading symbols from /usr/local/bin/bmp2tiff...done.
(gdb) set disassembly-flavor intel
(gdb) b deflate.c:1088
No source file named deflate.c.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 1 (deflate.c:1088) pending.
(gdb) r -c zip 1.bmp 1.tif
Starting program: /usr/local/bin/bmp2tiff -c zip out_put/bmp2tiff_zip/crashes/1.bmp 1.tif

Breakpoint 1, read_buf (strm=0x6059b0, buf=0x607670 "", size=65536) at deflate.c:1088
1088 zmemcpy(buf, strm->next_in, len);
Missing separate debuginfos, use: debuginfo-install glibc-2.17-78.el7.x86_64
(gdb) c
Continuing.

Breakpoint 1, read_buf (strm=0x6059b0, buf=0x60f670 "", size=32768) at deflate.c:1088
1088 zmemcpy(buf, strm->next_in, len);
(gdb) c
Continuing.

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff73ebd9f in __memcpy_ssse3_back () from /lib64/libc.so.6
(gdb) bt
#0 0x00007ffff73ebd9f in __memcpy_ssse3_back () from /lib64/libc.so.6
#1 0x00007ffff796d206 in read_buf (strm=0x6059b0, buf=0x60f670 "", size=32768) at deflate.c:1088
#2 0x00007ffff796dae4 in fill_window (s=0x605f20) at deflate.c:1467
#3 0x00007ffff796eaee in deflate_slow (s=0x605f20, flush=0) at deflate.c:1745
#4 0x00007ffff796c9af in deflate (strm=0x6059b0, flush=0) at deflate.c:903
#5 0x00007ffff7bbb103 in ZIPEncode (tif=0x605010, bp=<optimized out>, cc=<optimized out>, s=<optimized out>) at tif_zip.c:277
#6 0x00007ffff7bba81a in TIFFWriteScanline (tif=tif@entry=0x605010, buf=buf@entry=0x7ffff7fe05f0, row=row@entry=0, sample=sample@entry=0) at tif_write.c:173
#7 0x000000000040233c in main (argc=5, argv=0x7fffffffe408) at bmp2tiff.c:775
(gdb) x/2i $rip
=> 0x7ffff73ebd9f <__memcpy_ssse3_back+479>: movaps xmm5,XMMWORD PTR [rsi-0x80]
0x7ffff73ebda3 <__memcpy_ssse3_back+483>: movaps XMMWORD PTR [rdi-0x80],xmm5
(gdb) x/x $rsi-0x80
0x7ffff7ff7ff0: Cannot access memory at address 0x7ffff7ff7ff0
