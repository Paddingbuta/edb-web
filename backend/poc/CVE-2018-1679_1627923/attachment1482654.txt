#include <bson.h>

int main(void) {
    const uint8_t Data[] = {
        0x18, 0x0, 0x0, 0x0, 0x5, 0xe, 0x19, 0x2e,
        0x0, 0x4, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0,
        0x0, 0x0, 0x0, 0x0, 0x5, 0xe, 0x0, 0x0,
        0x18, 0x0, 0x0, 0x0, 0x5, 0xe, 0x19, 0x2e,
        0x0, 0x4, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0,
        0x0, 0x0, 0x0, 0x0, 0x5, 0xe, 0x0, 0x0,
        0x18, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0x0,
        0x0, 0x0, 0x0, 0x5, 0xe, 0x19, 0x2e, 0x0,
        0x4, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0,
    };
    size_t Size = 0x48;
    bson_reader_t *reader;
    const bson_t *b;
 
    reader = bson_reader_new_from_data (Data, Size);
    while ((b = bson_reader_read (reader, NULL))) {
        char *str = bson_as_canonical_extended_json (b, NULL);
        //fprintf (stdout, "%s\n", str);
        bson_free (str);
    }
    bson_reader_destroy (reader);

    return 0;
}
