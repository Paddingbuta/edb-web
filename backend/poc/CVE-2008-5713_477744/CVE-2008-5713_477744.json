{
    "bugid": "477744",
    "cveid": [
        "CVE-2008-5713"
    ],
    "summary": "CVE-2008-5713 kernel: soft lockup occurs when network load is very high",
    "alias": "CVE-2008-5713",
    "product": "Security Response",
    "hardware": "All",
    "os": "Linux",
    "url": "",
    "reported_date": "2008-12-23 09:08 UTC byEugene Teo (Security Response)",
    "attachment": [
        "https://bugzilla-attachments.redhat.com/attachment.cgi?id=327745"
    ],
    "comment": [
        "From Flavio Leitner:\nOn many core SMP machine (such as 16 core or more), soft lockup can occur when heavy network load are produced concurrently.\n\nThe lockup happens at __qdisc_run()(@net/sched/sch_generic.c:line 84). Because driver continue to send packet and return NETDEV_TX_OK, __qdisc_run() can't exit from qdisc_restart() loop.\n\nThis behavior may improve throughput, but some application can stuck over 10s.\nThis issue has been fixed on vanilla kernel.\n\nVersion-Release number of selected component:\nkernel version: 2.6.18-92.el5 (RHEL5.2GA)\n\nHow reproducible:\nIt can be reproducible in dozens of seconds, on 16 core SMP box. This issue is easy to happen, when UDP workload is very high.\n\nSteps to Reproduce:\nOn 16 core SMP machine, execute netperf in higher than 16 parallel with the following options, then it occurs at a client side.\n\n# netperf -H <netserver_address> -l 60 -t UDP_STREAM -- -s 262144 -r 262144 -m\n16384\n\nActual results:\nA lot of soft lockup messages are recorded into syslog, and performance problem appears in some applications.\n\nExpected results:\nIn kernel, any CPU doesn't dedicate to some work without schedule() for a long time.\n\nHardware info:\nExpress5800/140Rf-4\n\nBusiness impact:\nIt makes customer's applications unresponsive too long and it makes impossible to apply RHEL5.2 to performance/latency sensitive systems.\n\nAdditional info:\ngit patch: [NET]: Add preemption point in qdisc_runhttp://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=2ba2506ca7ca62c56edaa334b0fe61eb5eab6ab0",
        "Createdattachment 327745[details]reproducer",
        "(In reply tocomment #1)> Created an attachment (id=327745) [details]\n> reproducerNote netperf must be installed. Reproducer triggers the loockup for me safely with 40 tasks (the second cmd line parameter) on 16cpu machine. The first parameter is hostname of computer where \"netserver\" (part of netperf package) is running.",
        "This was addressed via:\n\nRed Hat Enterprise Linux version 5 (RHSA-2009:0264)"
    ]
}