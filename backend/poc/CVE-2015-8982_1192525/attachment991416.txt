/* gcc -o strxfrm-alloca strxfrm-alloca.c */

#include <string.h>
#include <stdlib.h>
#include <locale.h>

#define BUFLEN 512000
 
int main(void)
{
  char *src = malloc(BUFLEN + 1);
  char *dst = malloc(BUFLEN + 1);
  char *avail = NULL;

  memset(src, 'A', BUFLEN);
  setlocale(LC_ALL, "en_US.UTF-8");

  do
    avail = malloc(BUFLEN);
  while(avail);

  int len = strxfrm(dst, src, BUFLEN);
  return 0;
}
